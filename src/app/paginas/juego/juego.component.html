<div class="{{varTitulo}}">Juegos</div>
<mat-divider class="{{varLineaDivisoria}}"></mat-divider>


<div class="contenedor">

  <mat-tab-group [color]="primary" [backgroundColor]="primary" #tabs>

    <!-- ///////////////////////////////////////// LISTA DE JUEGOS  //////////////////////////////////////////////////-->

    <mat-tab index="0" label="Lista de juegos">

      <br>
      <br>
      <form>

        <div>
          <mat-list>

            <!-- ///////////////////////// LISTA DE JUEGOS ACTIVOS /////////////////////////////////-->
            <h3 class="CabeceraActivos" style="color: white;font-style: bold;font-size: 2em;" mat-subheader>Juegos
              Activos</h3>

            <form *ngIf="juegosActivos ;else Aviso_no_juegos_activos">
              <mat-list-item *ngFor="let juego of juegosActivos" (click)=JuegoSeleccionado(juego)
                routerLink="juegoSeleccionadoActivo">

                <mat-icon mat-list-icon><i class="material-icons green">check_circle_outline</i></mat-icon>
                <h4 mat-line>{{juego.nombreJuego}}</h4>
                <p mat-line> {{juego.tipo}}: {{juego.modo}} </p>
              </mat-list-item>
            </form>
            <ng-template #Aviso_no_juegos_activos>
              No hay juegos activos
            </ng-template>


            <!-- ///////////////////////// LISTA DE JUEGOS INACTIVOS /////////////////////////////////-->
            <br>
            <br>
            <h3 class="CabeceraInactivos" style="color: white;font-style: bold;font-size: 2em;" mat-subheader>Juegos
              Inactivos</h3>
            <form *ngIf="juegosInactivos;else Aviso_no_juegos_inactivos">
              <mat-list-item *ngFor="let juego of juegosInactivos" (click)=JuegoSeleccionado(juego)
                routerLink="juegoSeleccionadoInactivo">
                <mat-icon mat-list-icon><i class="material-icons red">history</i></mat-icon>
                <h4 class="ItemsInactivos" mat-line>{{juego.nombreJuego}}</h4>
                <p class="ItemsInactivos" mat-line> {{juego.tipo}}: {{juego.modo}} </p>
              </mat-list-item>


            </form>
            <ng-template #Aviso_no_juegos_inactivos>
              No hay juegos inactivos
            </ng-template>

            <!-- /////////////////////// LISTA JUEGOS PREPARADOS ///////////////////////////////////// -->
            <br>
            <br>
            <h3 class="CabeceraPreparados" style="color: white;font-style: bold;font-size: 2em;" mat-subheader>Juegos
              Preparados</h3>

            <form *ngIf="juegosPreparados ;else Aviso_no_juegos_Preparados">
              <mat-list-item *ngFor="let juego of juegosPreparados" (click)=JuegoSeleccionado(juego)
                routerLink="juegoSeleccionadoPreparado">

                <mat-icon mat-list-icon><i class="material-icons green">alarm_on</i></mat-icon>
                <h4 mat-line>{{juego.nombreJuego}}</h4>
                <p mat-line> {{juego.tipo}}: {{juego.modo}} </p>
              </mat-list-item>
            </form>
            <ng-template #Aviso_no_juegos_Preparados>
              No hay juegos preparados
            </ng-template>
          </mat-list>

        </div>

      </form>
    </mat-tab>





    <!-- ////////////////////////////////////////////// CREAR JUEGO  //////////////////////////////////////////////////-->

    <mat-tab label="Crear juego">

      <form [formGroup]="myForm">
        <mat-card class="panel" style="width: 90%">

          <mat-card-content>
            <mat-horizontal-stepper #stepper #linearHorizontalStepper="matHorizontalStepper" [linear]="true">


              <!-- /////////////////////// PASO 0: INTRODUCIR NOMBRE ////////////////////////////////-->
              <mat-step>


                <ng-template matStepLabel>
                  <div>Nombre</div>
                </ng-template>
                <div>

                  <mat-form-field>
                    <mat-label>Introduzca el nombre del juego</mat-label>
                    <input matInput placeholder="Escriba el Nombre" requiered formControlName="NombreDelJuego"
                      (keyup)="GuardaNombreDelJuego()">
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Next" [disabled]="!tengoNombre" matStepperNext>Siguiente</button>
                  </div>
                </div>
              </mat-step>

              <!-- /////////////////////// PRIMER PASO: SELECCIÓN DEL TIPO DE JUEGO ////////////////////////////////-->
              <mat-step>
                <ng-template matStepLabel>Tipo</ng-template>


                <div class="colorsChips">

                  <label class="LabelStepper">Selecciona un tipo de juego:</label>
                  <mat-chip-list class="mat-chip-list-stacked">
                    <mat-chip style="width: 300px" *ngFor="let tipo of seleccionTipoJuego; let i = index" selected
                      [color]="tipo.color" selected="{{seleccionTipoJuego[i].selected}}"
                      (click)="TipoDeJuegoSeleccionado(seleccionTipoJuego[i])" [value]="tipo.nombre"
                      [selectable]="true">
                      {{tipo.nombre}}
                    </mat-chip>
                  </mat-chip-list>
                  <span style="font-weight: bold;color:green;" color="secundary">Has elegido ...
                    {{tipoDeJuegoSeleccionado}} </span>
                </div>

                <div class="btnCambiarStep">
                  <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                  <button [disabled]="!tengoTipo" type="button" class="btn Next" matStepperNext>Siguiente</button>
                </div>



              </mat-step>


              <!-- //////////////////////// SEGUNDO PASO: SELECCIÓN DEL MODO DE JUEGO ///////////////////////// -->

              <mat-step>
                <ng-template matStepLabel>
                  <div>Modo</div>
                </ng-template>

                <div class="colorsChips">

                  <label class="LabelStepper">Selecciona un modo de juego:</label>
                  <mat-chip-list class="mat-chip-list-stacked">
                    <mat-chip style="width: 150px" *ngFor="let tipo of seleccionModoJuego; let i = index" selected
                      [color]="tipo.color" selected="{{seleccionModoJuego[i].selected}}"
                      (click)="ModoDeJuegoSeleccionado(seleccionModoJuego[i])" [value]="tipo.nombre"
                      [selectable]="true">
                      {{tipo.nombre}}
                    </mat-chip>
                  </mat-chip-list>
                  <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                    {{modoDeJuegoSeleccionado}} </span>

                </div>



                <div class="btnCambiarStep">
                  <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                  <button type="button" class="btn Next" [disabled]="!tengoModo" matStepperNext>Siguiente</button>
                </div>

              </mat-step>

              <!-- ////////////////////////////SI ESCOGEMOS ESCAPE ROOM////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Escape Room' && tengoModo">

                <mat-step>
                  <div class="row">
                    <div class="col-sm">
                      <div class="colorsChips">
                        <ng-template matStepLabel>
                          <div>Escoger escenario principal</div>
                        </ng-template>

                        <ng-template #contenido let-modal>
                          <div class="modal-header">
                            <h4 class="modal-title">Escenarios</h4>
                            <button class="close" aria-label="close" type="button" (click)="modal.dismiss()">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <div class='enColumna'>
                              <form style='width: 100%' *ngIf="escenariosProfesor;else Aviso_no_cuestionarios">

                                <div class="filter">
                                  <mat-form-field>
                                    <input matInput (keyup)="applyFilter($event.target.value)"
                                      placeholder="Filtro para buscar escenario...">
                                    <i class="material-icons" matSuffix>search</i>
                                  </mat-form-field>
                                </div>
                                <table align="center" mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                                  <!-- Titulo Column -->
                                  <ng-container matColumnDef="mapa">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Mapa </th>
                                    <td mat-cell *matCellDef="let escenario"> {{escenario.mapa}} </td>

                                  </ng-container>

                                  <!-- Pregunta Column -->
                                  <ng-container matColumnDef="descripcion">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Descripcion
                                    </th>
                                    <td mat-cell *matCellDef="let escenario"> {{escenario.descripcion}} </td>

                                  </ng-container>

                                  <ng-container matColumnDef="verObjetos">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}">Ver objetos
                                    </th>
                                    <td mat-cell *matCellDef="let escenario">
                                      <button (click)="verObjetosEscenario(escenario, objetos)" mat-icon-button
                                        matTooltip="Ver los objetos del escenario">
                                        <i class="material-icons green md-36">visibility</i>
                                      </button>
                                    </td>
                                  </ng-container>

                                  <ng-container matColumnDef="añadir">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}">Escoger</th>
                                    <td mat-cell *matCellDef="let escenario">
                                      <button (click)="escogerEscenarioEscape(escenario)" mat-icon-button
                                        matTooltip="Editar el escenario {{escenario.mapa}}">
                                        <i class="material-icons green md-36">check_circle_outline</i>
                                      </button>
                                    </td>
                                  </ng-container>

                                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                  <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                                  </tr>
                                </table>
                              </form>

                              <div class="contenedor">
                                <ng-template #Aviso_no_cuestionarios>
                                  <div class="texto">No tienes escenarios</div>
                                </ng-template>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-success" (click)="modal.close()">Ok!</button>
                          </div>
                        </ng-template>

                        <!--OTRO MODAL-->

                        <ng-template #objetos let-modal>
                          <div class="modal-header">
                            <h4 class="modal-title">Objetos</h4>
                            <button class="close" aria-label="close" type="button" (click)="modal.dismiss()">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <div class='enColumna'>
                              <form style='width: 100%' *ngIf="objetosProfesorModal;else Aviso_no_objetos">

                                <div class="filter">
                                  <mat-form-field>
                                    <input matInput (keyup)="applyFilter($event.target.value)"
                                      placeholder="Filtro para buscar objetos...">
                                    <i class="material-icons" matSuffix>search</i>
                                  </mat-form-field>
                                </div>
                                <table align="center" mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                                  <!-- Titulo Column -->
                                  <ng-container matColumnDef="nombre">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Nombre
                                    </th>
                                    <td mat-cell *matCellDef="let objeto"> {{objeto.nombre}} </td>

                                  </ng-container>

                                  <!-- Pregunta Column -->
                                  <ng-container matColumnDef="tipoDeObjeto">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Tipo de
                                      Objeto
                                    </th>
                                    <td mat-cell *matCellDef="let objeto"> {{objeto.tipoDeObjeto}} </td>

                                  </ng-container>

                                  <ng-container matColumnDef="modificarObjeto">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}">Modificar
                                      Objeto</th>
                                    <td mat-cell *matCellDef="let objeto">
                                      <button (click)="editarObjetoEnigma(objeto, editarObjeto)" mat-icon-button
                                        matTooltip="Editar el objeto">
                                        <i class="material-icons green md-36">edit</i>
                                      </button>
                                    </td>
                                  </ng-container>

                                  <ng-container matColumnDef="ver">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}">Ver
                                    </th>
                                    <td mat-cell *matCellDef="let objeto">
                                      <button (click)="verObj(objeto)" mat-icon-button
                                        matTooltip="Ver caracteristicas del objeto {{objeto.nombre}}">
                                        <i class="material-icons green md-36">visibility</i>
                                      </button>
                                    </td>
                                  </ng-container>

                                  <tr mat-header-row *matHeaderRowDef="displayedColumnsObjetos"></tr>
                                  <tr mat-row *matRowDef="let row; columns: displayedColumnsObjetos;">
                                  </tr>
                                </table>
                              </form>

                              <div class="contenedor">
                                <ng-template #Aviso_no_objetos>
                                  <div class="texto">No tiene objetos</div>
                                </ng-template>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-success" (click)="modal.close()">Ok!</button>
                          </div>
                        </ng-template>

                        <!--OTRO MODAL-->

                        <ng-template #objetosEnigma let-modal>
                          <div class="modal-header">
                            <h4 class="modal-title">Objetos enigma</h4>
                            <button class="close" aria-label="close" type="button" (click)="modal.dismiss()">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <div class='enColumna'>
                              <form style='width: 100%' *ngIf="objetosEnigmaModal;else Aviso_no_objetosEnigma">

                                <div class="filter">
                                  <mat-form-field>
                                    <input matInput (keyup)="applyFilter($event.target.value)"
                                      placeholder="Filtro para buscar objetos...">
                                    <i class="material-icons" matSuffix>search</i>
                                  </mat-form-field>
                                </div>
                                <table align="center" mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                                  <!-- Titulo Column -->
                                  <ng-container matColumnDef="nombre">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Nombre
                                    </th>
                                    <td mat-cell *matCellDef="let objeto"> {{objeto[0].nombre}} </td>

                                  </ng-container>

                                  <!-- Pregunta Column -->
                                  <ng-container matColumnDef="pregunta">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Pregunta
                                    </th>
                                    <td mat-cell *matCellDef="let objeto"> {{objeto[0].pregunta}} </td>

                                  </ng-container>
                                  <ng-container matColumnDef="respuesta">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Respuesta
                                    </th>
                                    <td mat-cell *matCellDef="let objeto"> {{objeto[0].respuesta}} </td>

                                  </ng-container>

                                  <ng-container matColumnDef="escoger">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}">Escoger
                                      objeto</th>
                                    <td mat-cell *matCellDef="let objeto">
                                      <button (click)="escogerObjetoPrincipal(objeto)" mat-icon-button
                                        matTooltip="Escoger el objeto">
                                        <i class="material-icons green md-36">check_circle_outline</i>
                                      </button>
                                    </td>
                                  </ng-container>

                                  <tr mat-header-row *matHeaderRowDef="displayedColumnsObjetosEnigma"></tr>
                                  <tr mat-row *matRowDef="let row; columns: displayedColumnsObjetosEnigma;">
                                  </tr>
                                </table>
                              </form>

                              <div class="contenedor">
                                <ng-template #Aviso_no_objetosEnigma>
                                  <div class="texto">No tiene objetos</div>
                                </ng-template>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-success" (click)="modal.close()">Ok!</button>
                          </div>
                        </ng-template>

                        <!--OTRO MODAL-->

                        <ng-template #editarObjeto let-modal>
                          <div class="modal-header">
                            <h4 class="modal-title">{{tituloObjetoEnigma}}</h4>
                            <button class="close" aria-label="close" type="button" (click)="modal.dismiss()">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <div class='enColumna'>

                              <form style='width: 100%' [formGroup]="editObject"
                                *ngIf="editarObjetoEnigmaVar;else Aviso_no_editarObjeto">

                                <ng-template>Configuración del objeto</ng-template>

                                <mat-form-field>
                                  <mat-label>Pregunta</mat-label>
                                  <input matInput formControlName="pregunta" required>
                                  <mat-error>Este campo es obligatorio</mat-error>
                                </mat-form-field>

                                <div>
                                  <mat-form-field>
                                    <mat-label>Respuesta</mat-label>
                                    <input matInput formControlName="respuesta" required>
                                    <mat-error>Este campo es obligatorio</mat-error>
                                  </mat-form-field>
                                </div>

                                <div class="btnCambiarStep" style="margin-top:10px;">
                                  <button type="button" class="btn Back" matStepperPrevious
                                    (click)="atras()">Atrás</button>
                                  <button type="button" class="btn Next" matStepperNext
                                    (click)="modificarObjeto()">Modificar</button>
                                </div>

                              </form>

                              <div class="contenedor">
                                <ng-template #Aviso_no_editarObjeto>
                                  <div class="texto">No tienes objeto que editar</div>
                                </ng-template>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-success" (click)="modal.close()">Ok!</button>
                          </div>
                        </ng-template>

                        <div>
                          <button type="button" class="btn EscogerEscenario" (click)="openModal(contenido,1)">Escoger
                            escenario</button>
                        </div>
                        <div>
                          <button type="button" class="btn btn Peticion"
                            (click)="escogerObjetoPrincipalModal(objetosEnigma)">Escoger
                            objeto Enigma principal</button>
                        </div>

                        <span style="font-weight: bold;color:green;" color="secundary">Has elegido ...
                          {{tipoDeJuegoSeleccionado}} </span>
                      </div>
                    </div>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" [disabled]="!configuradoEscenarioPrincipal"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <mat-step>
                  <div class="row">
                    <div class="col-sm">
                      <div class="colorsChips">
                        <ng-template matStepLabel>
                          <div>Escoger escenario secundario</div>
                        </ng-template>
                        <ng-template #contenidoSecundario let-modal>
                          <div class="modal-header">
                            <h4 class="modal-title">Escenarios secundarios</h4>
                            <button class="close" aria-label="close" type="button" (click)="modal.dismiss()">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <div class='enColumna'>
                              <form style='width: 100%'
                                *ngIf="escenariosSecundariosProfesor;else Aviso_no_escenariosSecundarios">

                                <div class="filter">
                                  <mat-form-field>
                                    <input matInput (keyup)="applyFilter($event.target.value)"
                                      placeholder="Filtro para buscar escenario...">
                                    <i class="material-icons" matSuffix>search</i>
                                  </mat-form-field>
                                </div>
                                <table align="center" mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                                  <!-- Titulo Column -->
                                  <ng-container matColumnDef="mapa">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Mapa </th>
                                    <td mat-cell *matCellDef="let escenario"> {{escenario.mapa}} </td>

                                  </ng-container>

                                  <!-- Pregunta Column -->
                                  <ng-container matColumnDef="descripcion">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}"> Descripcion
                                    </th>
                                    <td mat-cell *matCellDef="let escenario"> {{escenario.descripcion}} </td>

                                  </ng-container>

                                  <ng-container matColumnDef="añadir">
                                    <th mat-header-cell *matHeaderCellDef class="{{varTituloColumnaTabla}}">Escoger</th>
                                    <td mat-cell *matCellDef="let escenario">
                                      <button (click)="escogerEscenarioEscapeSecundario(escenario)" mat-icon-button
                                        matTooltip="Escoger el escenario {{escenario.mapa}}">
                                        <i class="material-icons green md-36">check_circle_outline</i>
                                      </button>
                                    </td>
                                  </ng-container>

                                  <tr mat-header-row *matHeaderRowDef="displayedColumnsEscenarioSecundario"></tr>
                                  <tr mat-row *matRowDef="let row; columns: displayedColumnsEscenarioSecundario;">
                                  </tr>
                                </table>
                              </form>

                              <div class="contenedor">
                                <ng-template #Aviso_no_escenariosSecundarios>
                                  <div class="texto">No tienes escenarios</div>
                                </ng-template>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-success" (click)="modal.close()">Ok!</button>
                          </div>
                        </ng-template>
                        <div>
                          <button type="button" class="btn EscogerEscenario"
                            (click)="openModal(contenidoSecundario,2)">Escoger
                            escenario secundario</button>
                        </div>
                      </div>
                      </div>
                      </div>
                      <div class="btnCambiarStep">
                        <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                        <button type="button" (click)="crearJuegoDeEscapeRoom()" class="btn Peticion">Crear</button>
                      </div>
                </mat-step>
              </div>
              <!-- ////////////////////////////SI ESCOGEMOS EL JUEGO DE TIPO DE PUNTOS ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Puntos' && tengoModo">


                <!-- TERCER PASO: ASIGNACIÓN DE PUNTO AL JUEGO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Puntos</div>
                  </ng-template>

                  <label class="LabelStepper">Selecciona los tipos de puntos</label>
                  <!-- Saltamos al componente de asignación -->
                  <app-asignacion-punto-juego (emisorTiposDePuntos)="RecibeTiposDePuntos ($event)">
                  </app-asignacion-punto-juego>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="puntosDelJuego.length === 0" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <!-- CUARTO PASO: CREACIÓN DE NIVELES-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Niveles</div>
                  </ng-template>

                  <label class="LabelStepper">Añade los niveles que desees</label>
                  <!-- Activamos el componente para crear nivel. Cada vez que se cree un nivel el componente
                    nos lo remite para que lo guardemos -->
                  <app-crear-nivel (emisorNiveles)="RecibeNivel ($event)">
                  </app-crear-nivel>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>

                </mat-step>


                <!-- ULTIMO PASO: CREACIÓN DEl JUEGO DE PUNTOS-->
                <mat-step>
                  <ng-template matStepLabel>Fin</ng-template>
                  <span style="font-weight: bold;color:green;"> Has creado ... {{tipoDeJuegoSeleccionado}} ...
                    {{modoDeJuegoSeleccionado}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar" (click)="CrearJuegoDePuntos();">Crear
                      juego de puntos</button>
                  </div>
                </mat-step>
              </div>

              <!-- ////////////////////////////SI ESCOGEMOS EL JUEGO DE TIPO DE COLECCIÓN ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Colección' && tengoModo">

                <mat-step *ngIf="modoDeJuegoSeleccionado  === 'Equipos'">
                  <ng-template matStepLabel>
                    <div>Asignación</div>
                  </ng-template>
                  <div>
                    <label class="LabelStepper">Selecciona el modo de asignación:</label>
                    <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                      <mat-radio-button (click)="modoAsignacion = 'Equipo'" class="radio-button" [value]="'Equipo'">
                        <label style="color: black;">Asignacion al equipo</label>
                      </mat-radio-button>
                      <mat-radio-button (click)="modoAsignacion = 'Individual'" class="radio-button"
                        [value]="'Individual'">
                        <label style="color: black;">Asignación individual (los alumnos comparten album con sus
                          compañeros de equipo) </label>
                      </mat-radio-button>
                    </mat-radio-group>

                    <span *ngIf="modoAsignacion" style="font-weight: bold;color:green;"> Has elegido ...
                      {{modoAsignacion}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!modoAsignacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- TERCER PASO: ASIGNACIÓN DE COLECCIÓN AL JUEGO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Colección</div>
                  </ng-template>

                  <label class="LabelStepper">Selecciona una colección para el juego</label>
                  <!-- Nos vamos al componente para asignar la colección -->
                  <app-asignacion-coleccion-juego (emisorColeccion)="RecibeColeccion ($event)">
                  </app-asignacion-coleccion-juego>
                  <span *ngIf="tengoColeccion" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{coleccionSeleccionada.nombre}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- ULTIMO PASO: CREACIÓN DEl JUEGO DE COLECCION-->
                <mat-step>
                  <ng-template matStepLabel>Fin</ng-template>
                  <span *ngIf="tengoColeccion" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{coleccionSeleccionada.nombre}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeColeccion();">Crear juego de colección</button>
                  </div>
                </mat-step>

              </div>

              <!--/////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO CUESTIONARIO //////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Cuestionario' && tengoModo">

                <!-- TERCER PASO: ELEGIR CUESTIONARIO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Cuestionario</div>
                  </ng-template>
                  <div>
                    <span *ngIf="tengoCuestionario" style="font-weight: bold;color:green;"> Has elegido ...
                      {{tipoDeJuegoSeleccionado}}: {{cuestionario.titulo}} ... {{modoDeJuegoSeleccionado}} </span>
                    <button type="button" class="btn Agregar" (click)="AbrirDialogoAgregarCuestionario()"
                      style="width: auto;">Añadir cuestionario<i class="material-icons">
                        post_add </i></button>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoCuestionario" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- CUARTO PASO: ELEGIR TIPO DE CUESTIONARIO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Modalidad</div>
                  </ng-template>

                  <div class="colorsChips">

                    <label class="LabelStepper">Selecciona la modalidad del juego de cuestionario:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip style="width: 150px"
                        *ngFor="let tipo of seleccionTipoDeJuegoDeCuestionario; let i = index" selected
                        [color]="tipo.color" selected="{{seleccionTipoDeJuegoDeCuestionario[i].selected}}"
                        (click)="TipoDeJuegoDeCuestionarioSeleccionado(seleccionTipoDeJuegoDeCuestionario[i])"
                        [value]="tipo.nombre" [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{tipoDeJuegoDeCuestionarioSeleccionado}}</span>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoTipoJuegoCuestionario" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!--quinto paso, establecemos la puntuacion-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Puntuación</div>
                  </ng-template>
                  <!-- casilla para introducir puntuacion que sumamos -->
                  <mat-form-field>
                    <mat-label>Introduzca los puntos a sumar por respuesta correcta</mat-label>
                    <input matInput formControlName="PuntuacionCorrecta" placeholder="Escriba puntos a sumar" requiered>
                  </mat-form-field>
                  <!-- casilla para introducir puntuacion que restamos -->
                  <mat-form-field>
                    <mat-label>Introduzca los puntos a restar por respuesta incorrecta</mat-label>
                    <input matInput formControlName="PuntuacionIncorrecta" placeholder="Escriba puntos a restar"
                      requiered>
                  </mat-form-field>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!TengoPuntuaciones()" (click)="GuardarPuntuacion()" type="button"
                      class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--sexto paso, escogemos la presentacion de preguntas y respuestas-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Presentación</div>
                  </ng-template>
                  <div>
                    <label class="LabelStepper">Selecciona un modo de presentacion:</label>
                    <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                      <mat-radio-button (click)="GuardarModoPresentacion(presentacion)" class="radio-button"
                        *ngFor="let presentacion of seleccionModoPresentacion" [value]="presentacion">
                        <label style="color: black;">{{presentacion}}</label>
                      </mat-radio-button>
                    </mat-radio-group>

                    <span *ngIf="modoPresentacion" style="font-weight: bold;color:green;"> Has elegido ...
                      {{modoPresentacion}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoModoPresentacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--Septimo paso, decidimos si hay un tiempo limite para responder-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Tiempo</div>
                  </ng-template>

                  <mat-form-field>
                    <mat-label>Introduzca el tiempo límite para responder al cuestionario (en segundos)</mat-label>
                    <input matInput formControlName="TiempoLimite" placeholder="Introduzca el tiempo limite" requiered>
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" (click)="GuardarTiempoLimite()" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--Ultimo paso, finalizamos-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Finalizar</div>
                  </ng-template>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeCuestionario()">Crear juego de cuestionario</button>
                  </div>
                </mat-step>
              </div>

              <!-- ////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO DE VOTACION ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Votación' && tengoModo">

                <!-- TERCER PASO: SELECTION DE TIPO DE VOTACION -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Votación</div>
                  </ng-template>

                  <div class="colorsChips">

                    <label class="LabelStepper">Selecciona el tipo de votación</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip style="width: 150px" *ngFor="let tipo of seleccionTipoDeVotacion; let i = index"
                        selected [color]="tipo.color" selected="{{seleccionTipoDeVotacion[i].selected}}"
                        (click)="TipoDeVotacionSeleccionado(seleccionTipoDeVotacion[i])" [value]="tipo.nombre"
                        [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{tipoDeVotacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoTipoDeVotacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <div *ngIf="tipoDeVotacionSeleccionado === 'Uno A Todos'">
                  <!-- Especificar modo de reparto de los puntos -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Modo de reparto</div>
                    </ng-template>

                    <div class="colorsChips">

                      <label class="LabelStepper">Selecciona el modo de reparto de los puntos</label>
                      <mat-chip-list class="mat-chip-list-stacked">
                        <div class="enFila" *ngFor="let modo of seleccionModoReparto; let i = index" style="width: 60%">
                          <!-- <mat-chip style = "width: 250px" *ngFor="let modo of seleccionModoReparto; let i = index" selected [color]="modo.color"  selected="{{seleccionModoReparto[i].selected}}" -->
                          <mat-chip style="width: 250px" selected [color]="modo.color"
                            selected="{{seleccionModoReparto[i].selected}}"
                            (click)="ModoDeRepartoSeleccionado(seleccionModoReparto[i])" [value]="modo.nombre"
                            [selectable]="true">
                            {{modo.nombre}}
                          </mat-chip>
                          <div *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre') && (i===1)">
                            <span style="font-weight: bold;">Puntos a repartir: </span>
                            <mat-slider thumbLabel (change)="GuardaValor($event)" tickInterval="1" min="1" max="100">
                            </mat-slider>
                          </div>
                        </div>
                      </mat-chip-list>

                      <span *ngIf="(modoDeRepartoSeleccionado !== 'Reparto libre')"
                        style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                        {{tipoDeVotacionSeleccionado}} ... {{modoDeRepartoSeleccionado}}</span>
                      <span *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre')"
                        style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                        {{tipoDeVotacionSeleccionado}} ... {{modoDeRepartoSeleccionado}} de {{puntosARepartir}}
                        puntos</span>

                    </div>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button *ngIf="(modoDeRepartoSeleccionado !== 'Reparto libre')" [disabled]="!tengoModoReparto"
                        type="button" class="btn Next" matStepperNext>Siguiente</button>
                      <button *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre')"
                        [disabled]="!tengoModoReparto && puntosARepartir > 0" type="button" class="btn Next"
                        matStepperNext>Siguiente</button>
                    </div>
                  </mat-step>
                  <!--CUARTO PASO : INTRODUCIR PUNTUACIONES-->
                  <mat-step *ngIf="modoDeRepartoSeleccionado === 'Reparto fijo según posición'">
                    <ng-template matStepLabel>
                      <div>Puntuaciones</div>
                    </ng-template>

                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 80%">
                          <div style="margin-top: 15px;">
                            <span>Introduzca el número de puntos y seleccione la posición a la que desea asignarlos:
                            </span>
                            <mat-form-field>
                              <mat-label>Introduzca pos puntos deseados</mat-label>
                              <input matInput formControlName="NuevaPuntuacion" placeholder="Escribe los puntos"
                                requiered (keyup)="GuardarNuevaPuntuacion()">
                            </mat-form-field>
                          </div>
                          <div style="margin-top: 10px">
                            <button type="button" class="btn Aceptar" [disabled]="!Preparado()"
                              (click)=AnadirPuntos()>Establecer Puntuación</button>
                          </div>
                        </div>

                        <form style="width: 100%">
                          <table style="width: 100%" align="center" mat-table [dataSource]="dataSource"
                            class="mat-elevation-z8">
                            <ng-container matColumnDef="select">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla">
                                <mat-checkbox (change)="$event ? MasterToggle() : null;"
                                  [checked]="selection.hasValue() && IsAllSelected()"
                                  [indeterminate]="selection.hasValue() && !IsAllSelected()">
                                </mat-checkbox>
                              </th>
                              <td mat-cell *matCellDef="let row">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                  (change)="$event ? selection.toggle(row) : null;"
                                  [checked]="selection.isSelected(row)">

                                </mat-checkbox>

                              </td>
                            </ng-container>

                            <!-- Posicion Column -->
                            <ng-container matColumnDef="Posicion">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Posición </th>
                              <td mat-cell style="text-align: center" *matCellDef="let tablaPuntuacion">
                                {{tablaPuntuacion.posicion}} </td>
                            </ng-container>

                            <!-- Puntos Column -->
                            <ng-container matColumnDef="Puntos">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Puntos </th>
                              <td mat-cell *matCellDef="let tablaPuntuacion; "> {{tablaPuntuacion.puntuacion}} </td>
                            </ng-container>



                            <tr mat-header-row *matHeaderRowDef="displayedColumnsTablaPuntuacion"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsTablaPuntuacion;"></tr>

                          </table>
                        </form>

                        <div style="margin-top: 10px">
                          <button type="button" class="btn Agregar" (click)=AnadirFila()>Añadir Fila<i
                              class="material-icons">
                              add</i></button>
                          <button type="button" class="btn Eliminar" (click)=EliminarFila()>Eliminar Fila<i
                              class="material-icons">
                              delete</i></button>
                        </div>

                      </div>
                    </div>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>

                    </div>
                  </mat-step>

                  <!-- ULTIMO PASO: CREAR EL JUEGO DE VOTACION UNO A TODOS -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeVotacionUnoATodos()">Crear juego de votación Uno A Todos</button>
                    </div>
                  </mat-step>
                </div>
                <div *ngIf="tipoDeVotacionSeleccionado === 'Todos A Uno'">
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Conceptos y pesos</div>
                    </ng-template>



                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 130%">
                          <!-- <table><tr>
                        <td><mat-form-field style = 'width: 100%;'>
                          <mat-label>Concepto</mat-label>
                          <input matInput required formControlName="NombreDelConcepto">
                        </mat-form-field></td>
                        <td><mat-form-field style = 'width: 30%; text-align: right;'>
                          <mat-label>Peso en %</mat-label>
                          <input matInput required formControlName="PesoDelConcepto" name="Peso">
                        </mat-form-field></td>
                      </tr></table> -->
                          <mat-form-field style='width: 40%; margin-right: 5%;'>
                            <mat-label>Concepto</mat-label>
                            <input matInput required formControlName="NombreDelConcepto">
                          </mat-form-field>
                          <br>
                          <mat-form-field style='width: 10%; text-align: right; margin-right: 5%;'>
                            <mat-label>Peso en %</mat-label>
                            <input matInput required formControlName="PesoDelConcepto" name="Peso">
                          </mat-form-field>

                          <button type="button" class="btn Agregar" (click)="PonConcepto()">Añade concepto</button>

                          <button type="button" class="btn Aceptar" (click)="AsignarConceptos()"> Asignar conceptos
                          </button>
                        </div>

                        <h2>Lista de conceptos</h2>
                        <form style="width: 100%">

                          <table style="width: 100%" align="left" mat-table [dataSource]="dataSourceConceptos"
                            class="mat-elevation-z8">

                            <ng-container matColumnDef="nombreConcepto" style="width: 60%">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Nombre del Concepto
                              </th>
                              <td mat-cell *matCellDef="let concepto"> {{concepto.nombre}} </td>
                              <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <ng-container matColumnDef="pesoConcepto" style="width: 20%; text-align: right;">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Peso en % </th>
                              <td mat-cell *matCellDef="let concepto "> {{concepto.peso}} </td>
                              <td mat-footer-cell *matFooterCellDef> Total: {{totalPesos}}</td>
                            </ng-container>

                            <ng-container matColumnDef=" " style="width: 20%; text-align: right;">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"></th>
                              <td mat-cell *matCellDef="let concepto">
                                <button (click)="BorraConcepto(concepto.nombre)" mat-icon-button>
                                  <i class="material-icons red md-36">delete</i>
                                </button>
                              </td>
                              <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="displayedColumnsConceptos"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsConceptos;"></tr>
                            <mat-footer-row class="sticky-footer"
                              *matFooterRowDef="['nombreConcepto', 'pesoConcepto', ' ']"></mat-footer-row>


                          </table>
                        </form>


                      </div>
                    </div>

                    <div *ngIf="conceptosAsignados" class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                    </div>

                  </mat-step>
                  <!-- ULTIMO PASO: CREAR EL JUEGO DE VOTACION TODOS A UNO -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeVotacionTodosAUno()">Crear juego de votación Todos A Uno</button>
                    </div>
                  </mat-step>
                </div>

              </div>

              <!-- ////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO DE COMPETICIÓN ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Competición' && tengoModo">

                <!-- TERCER PASO: SELECTION DE TIPO DE COMPETICION -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Competición</div>
                  </ng-template>

                  <div class="colorsChips">

                    <label class="LabelStepper">Selecciona un tipo de competición para el juego:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip style="width: 150px" *ngFor="let tipo of seleccionTipoDeCompeticion; let i = index"
                        selected [color]="tipo.color" selected="{{seleccionTipoDeCompeticion[i].selected}}"
                        (click)="TipoDeCompeticionSeleccionado(seleccionTipoDeCompeticion[i])" [value]="tipo.nombre"
                        [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{tipoDeCompeticionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoTipoDeCompeticion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- CUARTO PASO: NUMERO DE JORNADAS-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Jornadas</div>
                  </ng-template>

                  <!-- casilla para introducir jornadas -->
                  <mat-form-field>
                    <mat-label>Introduzca el número de jornadas</mat-label>
                    <input matInput formControlName="NumeroDeJornadas" placeholder="Escriba el número de jornadas"
                      requiered (keyup)="GuardarNumeroDeJornadas()">
                  </mat-form-field>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" [disabled]="!tengoNumeroDeJornadas"
                      matStepperNext>Siguiente</button>
                  </div>


                </mat-step>
                <!--Ultimo paso, en el caso de una liga: finalizamos-->
                <div *ngIf="tipoDeCompeticionSeleccionado === 'Liga'">
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeCompeticionLiga()">Crear juego de competicion tipo liga</button>
                    </div>
                  </mat-step>
                </div>


                <div *ngIf="tipoDeCompeticionSeleccionado === 'Fórmula Uno'">
                  <!-- QUINTO PASO PASO PARA FORMULA UNO: INTRODUCIR PUNTUACION DE LAS JORNADAS-->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Puntuación</div>
                    </ng-template>

                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 80%">
                          <div style="margin-top: 15px;">
                            <span>Introduzca el número de puntos y seleccione la posición a la que desea asignarlos:
                            </span>
                            <mat-form-field>
                              <mat-label>Introduzca pos Puntos deseados</mat-label>
                              <input matInput formControlName="NuevaPuntuacion" placeholder="Escribe los puntos"
                                requiered (keyup)="GuardarNuevaPuntuacion()">
                            </mat-form-field>
                          </div>
                          <div style="margin-top: 10px">
                            <button type="button" class="btn Aceptar" [disabled]="!Preparado()"
                              (click)=AnadirPuntos()>Establecer Puntuación</button>
                          </div>
                        </div>

                        <form style="width: 100%">
                          <table style="width: 100%" align="center" mat-table [dataSource]="dataSource"
                            class="mat-elevation-z8">
                            <ng-container matColumnDef="select">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla">
                                <mat-checkbox (change)="$event ? MasterToggle() : null;"
                                  [checked]="selection.hasValue() && IsAllSelected()"
                                  [indeterminate]="selection.hasValue() && !IsAllSelected()">
                                </mat-checkbox>
                              </th>
                              <td mat-cell *matCellDef="let row">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                  (change)="$event ? selection.toggle(row) : null;"
                                  [checked]="selection.isSelected(row)">

                                </mat-checkbox>

                              </td>
                            </ng-container>

                            <!-- Posicion Column -->
                            <ng-container matColumnDef="Posicion">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Posición </th>
                              <td mat-cell style="text-align: center" *matCellDef="let tablaPuntuacion">
                                {{tablaPuntuacion.posicion}} </td>
                            </ng-container>

                            <!-- Puntos Column -->
                            <ng-container matColumnDef="Puntos">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Puntos </th>
                              <td mat-cell *matCellDef="let tablaPuntuacion; "> {{tablaPuntuacion.puntuacion}} </td>
                            </ng-container>



                            <tr mat-header-row *matHeaderRowDef="displayedColumnsTablaPuntuacion"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsTablaPuntuacion;"></tr>

                          </table>
                        </form>

                        <div style="margin-top: 10px">
                          <button type="button" class="btn Agregar" (click)=AnadirFila()>Añadir Fila<i
                              class="material-icons">
                              add</i></button>
                          <button type="button" class="btn Eliminar" (click)=EliminarFila()>Eliminar Fila<i
                              class="material-icons">
                              delete</i></button>
                        </div>

                      </div>
                    </div>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>

                    </div>
                  </mat-step>

                  <!-- ULTIMO PASO: CREAR EL JUEGO DE FORMULA 1 -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeCompeticionFormulaUno()">Crear juego de competicion tipo fórmula
                        uno</button>
                    </div>
                  </mat-step>
                </div>

                <!-- <mat-step>
                    <ng-template matStepLabel>Finalizar</ng-template>

                    <span *ngIf="tipoDeJuegoSeleccionado === 'Juego De Competición'" style ="font-weight: bold;color:green;"> Has creado ... {{tipoDeJuegoSeleccionado}}... {{tipoJuegoCompeticionSeleccionado}} ... {{modoDeJuegoSeleccionado}} </span>
                          <div class="btnCambiarStep">
                            <div *ngIf="tipoJuegoCompeticionSeleccionado === 'Liga'">
                              <button type="button" class="btn Aceptar" (click) = "Finalizar();">Finalizar</button>
                              <button type="button" class="btn Aceptar" (click) = Finalizar();  routerLink = "juegoSeleccionadoActivo">Finalizar y Editar</button>
                            </div>

                            <div *ngIf="tipoJuegoCompeticionSeleccionado !== 'Liga'">
                              <button type="button" class="btn Aceptar" (click) = "Finalizar();">Finalizar</button>
                            </div>
                          </div>
            </mat-step> -->
              </div>

              <!-- ////////////////////// SI ESCOGEMOS JUEGO DE AVATAR ////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Avatar' && tengoModo">


                <!-- TERCER PASO: SELECCIONAR FAMILIAS DE AVATARES -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Familias</div>
                  </ng-template>

                  <label class="LabelStepper">Selecciona las familias de avatares para el juego</label>
                  <!-- Nos vamos al componente para asignar la colección -->
                  <app-asignar-familias-juego-avatares (emisorFamiliasElegidas)="RecibeFamiliasElegidas ($event)">
                  </app-asignar-familias-juego-avatares>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button *ngIf="tengoFamilias" type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>

                </mat-step>

                <!-- CUARTO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 1 -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 1</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        primer complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento1" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- QUINTO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 2 -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 2</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        segundo complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento2" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <!-- SEXTO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 3 -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 3</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        tercer complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento3" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- SEPTIMO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 4 -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 4</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        cuarto complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento4" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- OCTAVO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE AGREGAR VOZ -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Voz</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong> agragar
                        voz </strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioVoz" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- NOVENO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE VER AVATARES DE COMPAÑEROS -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Ver avatares</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>ver los
                        avatares de los compañeros</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioVerTodos" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- FINALIZAR  -->
                <mat-step>
                  <ng-template matStepLabel>Finalizar</ng-template>

                  <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}}...
                    {{tipoJuegoCompeticionSeleccionado}} ... {{modoDeJuegoSeleccionado}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar" (click)="CrearJuegoDeAvatar()">Crear
                      juego de avatar</button>
                  </div>
                </mat-step>
              </div>

              <!-- ////////////////////// SI ESCOGEMOS JUEGO DE GEOCACHING ////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Geocaching' && tengoModo">
                <!--Escogemos el escenario-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Escenario</div>
                  </ng-template>
                  <div>
                    <button type="button" class="btn Agregar" (click)="AbrirDialogoAgregarEscenario()"
                      style="width: auto;">Añadir escenario<i class="material-icons">
                        post_add </i></button>
                  </div>
                  <span *ngIf="tengoEscenario" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}... {{tipoJuegoCompeticionSeleccionado}} ... {{modoDeJuegoSeleccionado}}
                    ... {{escenario.mapa}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoEscenario" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--Añadir preguntas-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Preguntas</div>
                  </ng-template>
                  <div>
                    <button type="button" class="btn Agregar" (click)="AbrirDialogoAgregarPreguntas()"
                      style="width: auto;">Añadir preguntas<i class="material-icons">
                        post_add </i></button>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoPreguntas" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>



                <!--Tercer paso, establecemos la puntuacion-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Puntuación</div>
                  </ng-template>

                  <mat-form-field>
                    <mat-label>Introduzca la puntuacion por respuesta correcta</mat-label>
                    <input matInput formControlName="PuntuacionCorrectaGeo" placeholder="Escriba la puntuacion"
                      requiered>
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>Introduzca la puntuacion por respuesta incorrecta (si no quiere restar ponga 0)
                    </mat-label>
                    <input matInput formControlName="PuntuacionIncorrectaGeo" placeholder="Escriba la puntuacion"
                      requiered>
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>Introduzca el porcentaje a sumar por respuesta bonus correcta </mat-label>
                    <input matInput formControlName="PuntuacionCorrectaGeoBonus" placeholder="Escriba el porcentaje"
                      requiered>
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>Introduzca el porcentaje a restar por respuesta bonus incorrecta </mat-label>
                    <input matInput formControlName="PuntuacionIncorrectaGeoBonus" placeholder="Escriba el porcentaje"
                      requiered>
                  </mat-form-field>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!TengoPuntuacionesGeocatching()" (click)="GuardarPuntuacionGeocaching()"
                      type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!--Cuarto paso, finalizamos-->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Finalizar</div>
                  </ng-template>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeGeocaching()">Crear juego de geocaching</button>
                  </div>
                </mat-step>

              </div>

              <!--/////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO CUESTIONARIO DE SATISFACCION /////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Cuestionario de Satisfacción' && tengoModo">

                <!-- TERCER PASO: ELEGIR CUESTIONARIO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Cuestionario</div>
                  </ng-template>

                  <label class="LabelStepper">Selecciona el cuestionario de satisfacción</label>
                  <app-asignar-cuestionario-satisfaccion
                    (emisorCuestionarioSatisfaccionElegido)="RecibeCuestionarioSatisfaccionElegido ($event)">
                  </app-asignar-cuestionario-satisfaccion>
                  <span *ngIf="tengoCuestionarioSatisfaccion" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{cuestionarioSatisfaccion.titulo}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button *ngIf="tengoCuestionarioSatisfaccion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--cuarto paso, modificamos la descripcion-->
                <mat-step *ngIf="tengoCuestionarioSatisfaccion">
                  <ng-template matStepLabel>
                    <div>Descripción</div>
                  </ng-template>
                  <!-- casilla para introducir puntuacion que sumamos -->
                  <!-- <mat-form-field> -->
                  <mat-label>Modifica (si es necesario) la descipción</mat-label>
                  <!-- <textarea type="text" id="form7"  class="md-textarea md-textarea-auto form-control" [(ngModel)] = "cuestionarioSatisfaccion.Descripcion"></textarea> -->
                  <textarea class="md-textarea md-textarea-auto form-control"
                    (change)="GuardaDescripcionCuestionarioSatisfaccion($event)">{{cuestionarioSatisfaccion.descripcion}}</textarea>
                  <!-- <input  matInput formControlName="DescripcionCuestionarioSatisfaccion" placeholder="Escriba puntos a sumar" requiered> -->
                  <!-- </mat-form-field> -->

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--Ultimo paso, finalizamos-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Finalizar</div>
                  </ng-template>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeCuestionarioDeSatisfaccion()">Crear juego de cuestionario de
                      satisfacción</button>
                  </div>
                </mat-step>
              </div>
              <!-- //////////////////////////////// -->

              <!-- ///////////////JUEGO DE EVALUACION///////////////// -->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Evaluación' && tengoModo">
                <mat-step *ngIf="modoDeJuegoSeleccionado === 'Equipos'">
                  <ng-template matStepLabel>
                    <div>Equipos</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Los equipos seran evaluados por:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let equipo of seleccionEquiposEvaluacion; let i = index" selected
                        [color]="equipo.color" selected="{{seleccionEquiposEvaluacion[i].selected}}"
                        (click)="EquipoDeEvaluacionSeleccionado(seleccionEquiposEvaluacion[i])" [value]="equipo.nombre"
                        [selectable]="true">
                        {{equipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{equiposEvaluacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoEquipoEvaluacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Rúbrica</div>
                  </ng-template>
                  <mat-form-field appearance="fill">
                    <mat-label>Selecciona una rúbrica</mat-label>
                    <mat-select (selectionChange)="RubricaSeleccionChange($event.value)">
                      <mat-option *ngFor="let rubrica of rubricas; let i = index" [value]="i">{{rubrica.nombre}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoRubrica" type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Evaluación</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Selecciona la forma de evaluación:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let tipo of seleccionTipoDeEvaluacion; let i = index" selected
                        [color]="tipo.color" selected="{{seleccionTipoDeEvaluacion[i].selected}}"
                        (click)="TipoDeEvaluacionSeleccionado(seleccionTipoDeEvaluacion[i])" [value]="tipo.nombre"
                        [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <div *ngIf="tipoDeEvaluacionSeleccionado === '1 a N'">
                      <label class="LabelStepper">Selecciona cuántos evaluadores tendrá cada uno (1 a N): N = </label>
                      <mat-slider class="members-slider" (change)="SliderChanged($event.value)" [max]="DameMaxSlider()"
                        [value]="1" [thumbLabel]="true">
                      </mat-slider>
                    </div>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{tipoDeEvaluacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button
                      [disabled]="!tengoTipoDeEvaluacion || (tipoDeEvaluacionSeleccionado === '1 a N' && numeroDeMiembros == 0)"
                      type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <mat-step *ngIf="tipoDeEvaluacionSeleccionado === '1 a N'">
                  <ng-template matStepLabel>
                    <div>Relaciones</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Selecciona cómo hacer las relaciones:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let relacion of seleccionRelacionesEvaluacion; let i = index" selected
                        [color]="relacion.color" selected="{{seleccionRelacionesEvaluacion[i].selected}}"
                        (click)="RelacionDeEvaluacionSeleccionado(seleccionRelacionesEvaluacion[i])"
                        [value]="relacion.nombre" [selectable]="true">
                        {{relacion.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{relacionesEvaluacionSeleccionado}}</span>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoRelacionEvaluacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!--PASO DE ELEGIR LAS RELACIONES MENUALMENTE-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Relaciones</div>
                  </ng-template>
                  <table>
                    <tr *ngFor="let evaluado of DameEvaluados()">
                      <td>
                        <mat-label>{{evaluado.nombre}}</mat-label>
                      </td>
                      <td>
                        <mat-form-field appearance="fill">
                          <mat-label *ngIf="relacionesEvaluacionSeleccionado !== 'Aleatorio'">Selecciona sus evaluadores
                          </mat-label>
                          <mat-label *ngIf="relacionesEvaluacionSeleccionado === 'Aleatorio'" style="color: green;">
                            Evaluadores Asignados</mat-label>
                          <mat-select
                            *ngIf="modoDeJuegoSeleccionado !== 'Equipos' || equiposEvaluacionSeleccionado !== 'Individualmente'"
                            multiple (selectionChange)="RelacionChanged(evaluado.id, $event.value)"
                            [value]="this.relacionesMap.get(evaluado.id)">
                            <!--<mat-select-trigger>
                            <span>
                              ({{this.relacionesMap.get(evaluado.id) ? this.relacionesMap.get(evaluado.id).length : 0}})
                            </span>
                          </mat-select-trigger>-->
                            <mat-option *ngFor="let evaluador of DameEvaluadores() | exclude:evaluado"
                              [value]="evaluador.id">{{evaluador.nombre}} <span
                                *ngIf="ContarEvaluadores(evaluador.id) > 0">({{ContarEvaluadores(evaluador.id)}})</span>
                            </mat-option>
                          </mat-select>
                          <mat-select
                            *ngIf="modoDeJuegoSeleccionado === 'Equipos' && equiposEvaluacionSeleccionado === 'Individualmente'"
                            multiple (selectionChange)="RelacionChanged(evaluado.id, $event.value)"
                            [value]="this.relacionesMap.get(evaluado.id)">
                            <mat-option *ngFor="let evaluador of DameEvaluadores() | teamExclude:evaluado"
                              [value]="evaluador.id">{{evaluador.nombre}} <span
                                *ngIf="ContarEvaluadores(evaluador.id) > 0">({{ContarEvaluadores(evaluador.id)}})</span>
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!(todosTienenEvaluador && comprobacionDeN)" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Extras</div>
                  </ng-template>
                  <mat-list>

                    <mat-list-item>
                      <mat-checkbox (change)="AutoevaluacionChange($event.checked)">
                        <b>Autoevaluación</b>
                      </mat-checkbox>
                    </mat-list-item>

                    <mat-list-item>
                      <mat-checkbox (change)="ProfesorEvaluaChange($event.checked)">
                        <b>Profesor Evalua</b>
                      </mat-checkbox>
                    </mat-list-item>

                    <mat-radio-group *ngIf="profesorEvalua" class="radBtnProf" aria-label="Select an option">
                      <mat-radio-button value="normal" [checked]="profesorEvaluaModo === 'normal'"
                        (change)="ProfesorEvaluaModoChange($event.value)"><b>Normal: La nota se cuenta como la de un
                          evaluador más</b></mat-radio-button>
                      <mat-radio-button value="dominante" [checked]="profesorEvaluaModo === 'dominante'"
                        (change)="ProfesorEvaluaModoChange($event.value)"><b>Dominante: La nota del profesor es un 50%
                          del total</b></mat-radio-button>
                    </mat-radio-group>

                  </mat-list>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Criterio</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Selecciona con qué criterio se puntuará:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let criterio of seleccionCriterioEvaluacion; let i = index" selected
                        [color]="criterio.color" selected="{{seleccionCriterioEvaluacion[i].selected}}"
                        (click)="CriterioDeEvaluacionSeleccionado(seleccionCriterioEvaluacion[i])"
                        [value]="criterio.nombre" [selectable]="true">
                        {{criterio.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{criterioEvaluacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoCriterioEvaluacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <mat-step *ngIf="criterioEvaluacionSeleccionado === 'Por pesos'">
                  <ng-template matStepLabel>
                    <div>Pesos</div>
                  </ng-template>
                  <table *ngFor="let criterio of rubricaElegida.Criterios; let c = index">
                    <tr>
                      <td>
                        <b>{{criterio.nombre}}</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input matInput type="number" name="{{c}}"
                            (change)="PesosParentChanged($event.target.name, $event.target.value)"
                            value="{{PesoPorDefecto(rubricaElegida.criterios.length)}}" min="0" max="100">
                          <span matSuffix>%</span>
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr *ngFor="let elemento of criterio.Elementos; let e = index">
                      <td>
                        {{elemento}}
                      </td>
                      <td>
                        <mat-form-field>
                          <input matInput type="number" name="{{c}}-{{e+1}}"
                            (change)="PesosChanged($event.target.name, $event.target.value)"
                            value="{{PesoPorDefecto(criterio.elementos.length)}}" min="0" max="100">
                          <span matSuffix>%</span>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>
                  <!--
                <mat-list *ngFor="let criterio of rubricaElegida.Criterios; let c = index">
                  <mat-list-item><b>{{criterio.Nombre}}</b></mat-list-item>
                  <mat-list-item *ngFor="let elemento of criterio.Elementos; let e = index">
                    <mat-form-field>
                      <mat-label>{{elemento}}</mat-label>
                      <input matInput type="number" name="{{c}}-{{e}}" (change)="PesosChanged($event.target.name, $event.target.value)" value="{{PesoPorDefecto(criterio.Elementos.length)}}" min="0" max="100">
                      <span matSuffix>%</span>
                    </mat-form-field>
                  </mat-list-item>
                </mat-list>-->
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!pesosSuman100" type="button" class="btn Next"
                      (click)="CrearJuegoEvaluacion()">Siguiente</button>
                  </div>
                </mat-step>
                <mat-step *ngIf="criterioEvaluacionSeleccionado === 'Por penalización'">
                  <ng-template matStepLabel>
                    <div>Penalización</div>
                  </ng-template>
                  <mat-list *ngFor="let criterio of rubricaElegida.criterios; let c = index">
                    <mat-list-item><b>{{criterio.nombre}}</b></mat-list-item>
                    <mat-list-item *ngFor="let elemento of criterio.elementos; let i = index">{{i+1}}. {{elemento}}
                    </mat-list-item>
                    <table>
                      <tr>
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" value="0" disabled>
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" value="100" disabled>
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <!--<button mat-mini-fab color="primary" value="0" >+</button></td>-->
                      </tr>
                      <tr *ngIf="criterio.Elementos.length >= 1">
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" name="{{c}}-0-num"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="1" min="1"
                              max="{{criterio.elementos.length}}">
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" name="{{c}}-0-p"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="75" min="0"
                              max="100">
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                      </tr>
                      <tr *ngIf="criterio.elementos.length >= 2">
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" name="{{c}}-1-num"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="2" min="2"
                              max="{{criterio.elementos.length}}">
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" name="{{c}}-1-p"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="50" min="0"
                              max="100">
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                      <tr *ngIf="criterio.elementos.length >= 3">
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" name="{{c}}-2-num"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="3" min="3"
                              max="{{criterio.elementos.length}}">
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" name="{{c}}-2-p"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="0" min="0"
                              max="100">
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                      </tr>
                    </table>
                  </mat-list>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" (click)="CrearJuegoEvaluacion()">Siguiente</button>
                  </div>
                </mat-step>

              </div>
              <!--
          <div *ngIf="tipoDeJuegoSeleccionado !== 'Juego De Competición' && tipoDeJuegoSeleccionado !== 'Juego De Cuestionario'">

            <mat-step>
              <ng-template matStepLabel>Finalizar</ng-template>

                <span *ngIf="tipoDeJuegoSeleccionado === 'Juego De Colección'" style ="font-weight: bold;color:green;"> Has creado ... {{tipoDeJuegoSeleccionado}}: {{nombreColeccionSeleccionada}} ... {{modoDeJuegoSeleccionado}} </span>
                <span *ngIf="tipoDeJuegoSeleccionado === 'Juego De Puntos'" style ="font-weight: bold;color:green;"> Has creado ... {{tipoDeJuegoSeleccionado}} ... {{modoDeJuegoSeleccionado}} </span>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Aceptar" (click) = "Finalizar();">Finalizar</button>
                    </div>
            </mat-step>
          </div> -->

            </mat-horizontal-stepper>
          </mat-card-content>
        </mat-card>
      </form>
    </mat-tab>
  </mat-tab-group>

</div>